# è¯­ä¹‰åŒ–ç‰ˆæœ¬ç®¡ç†è§„èŒƒ

## è¯­ä¹‰åŒ–ç‰ˆæœ¬æ ¼å¼

```
ç‰ˆæœ¬å·æ ¼å¼ï¼šä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·
ç¤ºä¾‹ï¼š1.2.3

MAJOR.MINOR.PATCH
  |     |     |
  |     |     â””â”€ ä¿®è®¢å·ï¼šBugä¿®å¤ã€å°è¡¥ä¸
  |     â””â”€â”€â”€â”€â”€â”€â”€ æ¬¡ç‰ˆæœ¬å·ï¼šæ–°åŠŸèƒ½ã€å‘åå…¼å®¹
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ä¸»ç‰ˆæœ¬å·ï¼šé‡å¤§å˜æ›´ã€ä¸å…¼å®¹
```

## ç‰ˆæœ¬å·è¯´æ˜

### ğŸ“Š ç‰ˆæœ¬å·ç»„æˆéƒ¨åˆ†

| ä½ç½®            | åç§°       | è¯´æ˜     | ä½•æ—¶é€’å¢            | ç¤ºä¾‹           |
| ----------------- | ------------ | ---------- | --------------------- | ---------------- |
| **MAJOR** | ä¸»ç‰ˆæœ¬å·   | é‡å¤§å˜æ›´ | ä¸å…¼å®¹çš„ API ä¿®æ”¹   | 1.0.0 â†’ 2.0.0 |
| **MINOR** | æ¬¡ç‰ˆæœ¬å·   | åŠŸèƒ½æ›´æ–° | å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢  | 1.0.0 â†’ 1.1.0 |
| **PATCH** | ä¿®è®¢ç‰ˆæœ¬å· | é—®é¢˜ä¿®å¤ | å‘ä¸‹å…¼å®¹çš„ bug ä¿®å¤ | 1.0.0 â†’ 1.0.1 |

## è¯¦ç»†ç‰ˆæœ¬è§„åˆ™

### 1. ğŸ› PATCH ç‰ˆæœ¬ (0.0.x)

**ä½•æ—¶ä½¿ç”¨ï¼š**

* ä¿®å¤ bug
* å®‰å…¨è¡¥ä¸
* æ€§èƒ½ä¼˜åŒ–ï¼ˆä¸æ”¹å˜ APIï¼‰
* æ–‡æ¡£æ›´æ–°
* ä»£ç é‡æ„ï¼ˆä¸å½±å“å¤–éƒ¨æ¥å£ï¼‰

**ç¤ºä¾‹å˜æ›´ï¼š**

```bash
# ä» 1.2.3 â†’ 1.2.4
ğŸ› fix(api): ä¿®å¤ç”¨æˆ·ç™»å½•è¶…æ—¶é—®é¢˜
:bug: fix(api): ä¿®å¤ç”¨æˆ·ç™»å½•è¶…æ—¶é—®é¢˜

ğŸ”’ security: ä¿®å¤ XSS æ¼æ´
:lock: security: ä¿®å¤ XSS æ¼æ´

âš¡ perf(query): ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
:zap: perf(query): ä¼˜åŒ–æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
```

**å¯¹åº”çš„ Git æäº¤ç±»å‹ï¼š**

* `fix` - Bug ä¿®å¤
* `perf` - æ€§èƒ½ä¼˜åŒ–
* `security` - å®‰å…¨ä¿®å¤
* `docs` - æ–‡æ¡£æ›´æ–°ï¼ˆä»…æ–‡æ¡£ï¼‰

### 2. âœ¨ MINOR ç‰ˆæœ¬ (0.x.0)

**ä½•æ—¶ä½¿ç”¨ï¼š**

* æ·»åŠ æ–°åŠŸèƒ½ï¼ˆå‘ä¸‹å…¼å®¹ï¼‰
* æ ‡è®°æ—§åŠŸèƒ½ä¸ºåºŸå¼ƒï¼ˆä½†ä»å¯ç”¨ï¼‰
* å†…éƒ¨é‡å¤§é‡æ„
* æ·»åŠ æ–°çš„å¯é€‰å‚æ•°
* æ‰©å±•ç°æœ‰ API

**ç¤ºä¾‹å˜æ›´ï¼š**

```bash
# ä» 1.2.4 â†’ 1.3.0
âœ¨ feat(auth): æ–°å¢ OAuth2 ç™»å½•æ”¯æŒ
:sparkles: feat(auth): æ–°å¢ OAuth2 ç™»å½•æ”¯æŒ

âœ¨ feat(api): æ·»åŠ ç”¨æˆ·å¤´åƒä¸Šä¼ åŠŸèƒ½
:sparkles: feat(api): æ·»åŠ ç”¨æˆ·å¤´åƒä¸Šä¼ åŠŸèƒ½

âš ï¸ deprecate(api): æ ‡è®°æ—§çš„è®¤è¯æ–¹æ³•ä¸ºåºŸå¼ƒ
:warning: deprecate(api): æ ‡è®°æ—§çš„è®¤è¯æ–¹æ³•ä¸ºåºŸå¼ƒ
```

**å¯¹åº”çš„ Git æäº¤ç±»å‹ï¼š**

* `feat` - æ–°åŠŸèƒ½
* `refactor` - é‡æ„ï¼ˆä¸ç ´åå…¼å®¹æ€§ï¼‰
* `deprecate` - åŠŸèƒ½åºŸå¼ƒ

### 3. ğŸ’¥ MAJOR ç‰ˆæœ¬ (x.0.0)

**ä½•æ—¶ä½¿ç”¨ï¼š**

* ä¸å…¼å®¹çš„ API å˜æ›´
* ç§»é™¤å·²åºŸå¼ƒçš„åŠŸèƒ½
* é‡å¤§æ¶æ„è°ƒæ•´
* æ”¹å˜æ ¸å¿ƒè¡Œä¸º
* åˆ é™¤æˆ–é‡å‘½åå…¬å…± API

**ç¤ºä¾‹å˜æ›´ï¼š**

```bash
# ä» 1.3.0 â†’ 2.0.0
ğŸ’¥ breaking: é‡æ„è®¤è¯ç³»ç»Ÿï¼Œç§»é™¤æ—§çš„ API
:boom: breaking: é‡æ„è®¤è¯ç³»ç»Ÿï¼Œç§»é™¤æ—§çš„ API

ğŸ’¥ breaking: æ›´æ”¹å“åº”æ•°æ®æ ¼å¼
:boom: breaking: æ›´æ”¹å“åº”æ•°æ®æ ¼å¼

ğŸ”¥ remove: åˆ é™¤å·²åºŸå¼ƒçš„ v1 API ç«¯ç‚¹
:fire: remove: åˆ é™¤å·²åºŸå¼ƒçš„ v1 API ç«¯ç‚¹
```

**å¯¹åº”çš„ Git æäº¤ç±»å‹ï¼š**

* `breaking` - ç ´åæ€§å˜æ›´
* `remove` - åˆ é™¤åŠŸèƒ½

## ç‰¹æ®Šç‰ˆæœ¬å·

### ğŸš€ å¼€å‘é˜¶æ®µç‰ˆæœ¬

#### 0.y.zï¼ˆåˆå§‹å¼€å‘é˜¶æ®µï¼‰

```
0.1.0  - åˆå§‹åŠŸèƒ½ç‰ˆæœ¬
0.1.1  - Bug ä¿®å¤
0.2.0  - æ–°å¢åŠŸèƒ½
0.3.0  - ç»§ç»­å¼€å‘
```

**ç‰¹ç‚¹ï¼š**

* ä¸»ç‰ˆæœ¬å·ä¸º 0ï¼Œè¡¨ç¤ºä¸ç¨³å®š
* API å¯èƒ½éšæ—¶å˜åŒ–
* ä¸ä¿è¯å‘ä¸‹å…¼å®¹
* é€‚åˆå¿«é€Ÿè¿­ä»£å¼€å‘

#### 1.0.0ï¼ˆé¦–ä¸ªç¨³å®šç‰ˆæœ¬ï¼‰

```
1.0.0  - é¦–ä¸ªç”Ÿäº§å°±ç»ªç‰ˆæœ¬
```

**æ ‡å¿—ï¼š**

* API è¶‹äºç¨³å®š
* æ ¸å¿ƒåŠŸèƒ½å®Œæ•´
* ç»è¿‡å……åˆ†æµ‹è¯•
* å¯ä»¥ç”¨äºç”Ÿäº§ç¯å¢ƒ

### ğŸ·ï¸ é¢„å‘å¸ƒç‰ˆæœ¬

```
1.0.0-alpha.1   - å†…éƒ¨æµ‹è¯•ç‰ˆ
1.0.0-beta.1    - å…¬å¼€æµ‹è¯•ç‰ˆ
1.0.0-rc.1      - å€™é€‰å‘å¸ƒç‰ˆ
1.0.0           - æ­£å¼å‘å¸ƒç‰ˆ
```

**å„é˜¶æ®µè¯´æ˜ï¼š**

| é˜¶æ®µ              | æ ‡è¯†           | è¯´æ˜                       | ç¨³å®šæ€§  |
| ------------------- | ---------------- | ---------------------------- | --------- |
| **Alpha**   | `-alpha.x` | å†…éƒ¨æµ‹è¯•ï¼ŒåŠŸèƒ½ä¸å®Œæ•´       | âš ï¸ ä½ |
| **Beta**    | `-beta.x`  | å…¬å¼€æµ‹è¯•ï¼ŒåŠŸèƒ½å®Œæ•´ä½†æœ‰ bug | âš ï¸ ä¸­ |
| **RC**      | `-rc.x`    | å€™é€‰ç‰ˆæœ¬ï¼Œæ¥è¿‘æ­£å¼ç‰ˆ       | âœ… é«˜   |
| **Release** | æ— åç¼€         | æ­£å¼ç‰ˆæœ¬                   | âœ… ç¨³å®š |

### ğŸ“¦ æ„å»ºå…ƒæ•°æ®

```
1.0.0+20231201
1.0.0+build.123
1.0.0-beta.1+exp.sha.5114f85
```

**ç”¨é€”ï¼š**

* æ„å»ºæ—¥æœŸ
* æ„å»ºç¼–å·
* Git æäº¤å“ˆå¸Œ

## ç‰ˆæœ¬æ›´æ–°ç¤ºä¾‹

### ğŸ“ˆ å®Œæ•´çš„ç‰ˆæœ¬æ¼”è¿›ç¤ºä¾‹

```
0.1.0  - ğŸ‰ init: é¡¹ç›®åˆå§‹åŒ–
         :tada: init: é¡¹ç›®åˆå§‹åŒ–
         
0.1.1  - ğŸ› fix: ä¿®å¤ç™»å½• bug
         :bug: fix: ä¿®å¤ç™»å½• bug
         
0.2.0  - âœ¨ feat: æ·»åŠ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
         :sparkles: feat: æ·»åŠ ç”¨æˆ·æ³¨å†ŒåŠŸèƒ½
         
0.2.1  - ğŸ› fix: ä¿®å¤æ³¨å†ŒéªŒè¯é—®é¢˜
         :bug: fix: ä¿®å¤æ³¨å†ŒéªŒè¯é—®é¢˜
         
0.3.0  - âœ¨ feat: æ·»åŠ å¯†ç é‡ç½®åŠŸèƒ½
         :sparkles: feat: æ·»åŠ å¯†ç é‡ç½®åŠŸèƒ½
         
1.0.0  - ğŸš€ release: é¦–ä¸ªç¨³å®šç‰ˆæœ¬å‘å¸ƒ
         :rocket: release: é¦–ä¸ªç¨³å®šç‰ˆæœ¬å‘å¸ƒ
         
1.0.1  - ğŸ› fix: ä¿®å¤é‚®ä»¶å‘é€é—®é¢˜
         :bug: fix: ä¿®å¤é‚®ä»¶å‘é€é—®é¢˜
         
1.1.0  - âœ¨ feat: æ·»åŠ ç¬¬ä¸‰æ–¹ç™»å½•æ”¯æŒ
         :sparkles: feat: æ·»åŠ ç¬¬ä¸‰æ–¹ç™»å½•æ”¯æŒ
         
1.2.0  - âœ¨ feat: æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†
         :sparkles: feat: æ·»åŠ ç”¨æˆ·æƒé™ç®¡ç†
         
2.0.0  - ğŸ’¥ breaking: é‡æ„ APIï¼Œä¸å…¼å®¹æ—§ç‰ˆæœ¬
         :boom: breaking: é‡æ„ APIï¼Œä¸å…¼å®¹æ—§ç‰ˆæœ¬
```

## Package.json ç‰ˆæœ¬ç®¡ç†

### ğŸ“ åŸºæœ¬é…ç½®

```json
{
  "name": "my-project",
  "version": "1.2.3",
  "description": "é¡¹ç›®æè¿°"
}
```

### ğŸ”„ ç‰ˆæœ¬æ›´æ–°å‘½ä»¤

```bash
# è‡ªåŠ¨æ›´æ–°ç‰ˆæœ¬å·
npm version patch    # 1.2.3 â†’ 1.2.4 (bug ä¿®å¤)
npm version minor    # 1.2.3 â†’ 1.3.0 (æ–°åŠŸèƒ½)
npm version major    # 1.2.3 â†’ 2.0.0 (ç ´åæ€§å˜æ›´)

# é¢„å‘å¸ƒç‰ˆæœ¬
npm version prepatch   # 1.2.3 â†’ 1.2.4-0
npm version preminor   # 1.2.3 â†’ 1.3.0-0
npm version premajor   # 1.2.3 â†’ 2.0.0-0

# ä»é¢„å‘å¸ƒå‡çº§åˆ°æ­£å¼ç‰ˆ
npm version prerelease # 1.2.4-0 â†’ 1.2.4-1
```

### ğŸ¯ å®é™…å·¥ä½œæµç¤ºä¾‹

```bash
# åœºæ™¯ 1ï¼šä¿®å¤ bug
git add .
git commit -m "ğŸ› fix(api): ä¿®å¤æ•°æ®è¿”å›æ ¼å¼é”™è¯¯"
npm version patch        # è‡ªåŠ¨å‡çº§åˆ° 1.2.4
git push --follow-tags   # æ¨é€ä»£ç å’Œæ ‡ç­¾

# åœºæ™¯ 2ï¼šæ·»åŠ æ–°åŠŸèƒ½
git add .
git commit -m "âœ¨ feat(user): æ·»åŠ ç”¨æˆ·èµ„æ–™ç¼–è¾‘åŠŸèƒ½"
npm version minor        # è‡ªåŠ¨å‡çº§åˆ° 1.3.0
git push --follow-tags

# åœºæ™¯ 3ï¼šç ´åæ€§å˜æ›´
git add .
git commit -m "ğŸ’¥ breaking: é‡æ„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ"
npm version major        # è‡ªåŠ¨å‡çº§åˆ° 2.0.0
git push --follow-tags
```

## ä¾èµ–ç‰ˆæœ¬ç®¡ç†

### ğŸ“š ç‰ˆæœ¬èŒƒå›´ç¬¦å·

```json
{
  "dependencies": {
    "exact": "1.2.3",           // ç²¾ç¡®ç‰ˆæœ¬
    "patch": "~1.2.3",          // å…è®¸è¡¥ä¸æ›´æ–° (1.2.x)
    "minor": "^1.2.3",          // å…è®¸æ¬¡ç‰ˆæœ¬æ›´æ–° (1.x.x)
    "range": ">=1.2.3 <2.0.0",  // ç‰ˆæœ¬èŒƒå›´
    "latest": "*",              // æœ€æ–°ç‰ˆæœ¬ï¼ˆä¸æ¨èï¼‰
    "next": "next"              // ç‰¹å®šæ ‡ç­¾
  }
}
```

### ğŸ¯ ç‰ˆæœ¬ç¬¦å·è¯¦è§£

| ç¬¦å·           | ç¤ºä¾‹          | åŒ¹é…èŒƒå›´     | ä½¿ç”¨åœºæ™¯           |
| ---------------- | --------------- | -------------- | -------------------- |
| **æ— â€‹** | `1.2.3`   | ä»… 1.2.3     | éœ€è¦ç²¾ç¡®ç‰ˆæœ¬       |
| **\~**   | `~1.2.3`  | 1.2.x        | æ¥å— bug ä¿®å¤      |
| **^**    | `^1.2.3`  | 1.x.x        | æ¥å—æ–°åŠŸèƒ½ï¼ˆé»˜è®¤ï¼‰ |
| **>=**   | `>=1.2.3` | 1.2.3 åŠä»¥ä¸Š | æœ€ä½ç‰ˆæœ¬è¦æ±‚       |
| **x**    | `1.2.x`   | 1.2.0-1.2.âˆ | ç‰ˆæœ¬é€šé…ç¬¦         |

### ğŸ’¡ æœ€ä½³å®è·µ

```json
{
  "dependencies": {
    // ç¨³å®šçš„æ ¸å¿ƒä¾èµ–ï¼Œä½¿ç”¨ ^ 
    "react": "^18.0.0",
    
    // é‡è¦ä½†é¢‘ç¹æ›´æ–°çš„åº“ï¼Œä½¿ç”¨ ~
    "axios": "~1.4.0",
    
    // å…³é”®å®‰å…¨åº“ï¼Œé”å®šç²¾ç¡®ç‰ˆæœ¬
    "jsonwebtoken": "9.0.0"
  },
  "devDependencies": {
    // å¼€å‘å·¥å…·ï¼Œå¯ä»¥ä½¿ç”¨ ^
    "eslint": "^8.45.0",
    "typescript": "^5.1.0"
  }
}
```

## ç‰ˆæœ¬å‘å¸ƒæ£€æŸ¥æ¸…å•

### âœ… å‘å¸ƒå‰æ£€æŸ¥

* [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
* [ ] ä»£ç å®¡æŸ¥å®Œæˆ
* [ ] æ–‡æ¡£å·²æ›´æ–°
* [ ] CHANGELOG.md å·²æ›´æ–°
* [ ] ç‰ˆæœ¬å·ç¬¦åˆè¯­ä¹‰åŒ–è§„èŒƒ
* [ ] ç ´åæ€§å˜æ›´å·²æ˜ç¡®æ ‡æ³¨
* [ ] ä¾èµ–é¡¹å·²æ›´æ–°å¹¶æµ‹è¯•

### ğŸ“‹ å‘å¸ƒæµç¨‹

```bash
# 1. ç¡®ä¿åœ¨ä¸»åˆ†æ”¯ä¸”ä»£ç æœ€æ–°
git checkout main
git pull origin main

# 2. è¿è¡Œæµ‹è¯•
npm test

# 3. æ›´æ–°ç‰ˆæœ¬å·ï¼ˆè‡ªåŠ¨åˆ›å»º git tagï¼‰
npm version [patch|minor|major]

# 4. æ¨é€ä»£ç å’Œæ ‡ç­¾
git push origin main --follow-tags

# 5. å‘å¸ƒåˆ° npmï¼ˆå¦‚æœæ˜¯ npm åŒ…ï¼‰
npm publish

# 6. åˆ›å»º GitHub Releaseï¼ˆå¯é€‰ï¼‰
gh release create v1.2.3 --notes "å‘å¸ƒè¯´æ˜"
```

## å¸¸è§é—®é¢˜

### â“ ä½•æ—¶å‡çº§ä¸»ç‰ˆæœ¬å·ï¼Ÿ

**å¿…é¡»å‡çº§çš„æƒ…å†µï¼š**

* åˆ é™¤å…¬å…± API
* ä¿®æ”¹ API çš„è¡Œä¸ºæ–¹å¼
* é‡å‘½åå‡½æ•°æˆ–å‚æ•°
* æ”¹å˜è¿”å›å€¼ç±»å‹
* ç§»é™¤åŠŸèƒ½ç‰¹æ€§

**æ— éœ€å‡çº§çš„æƒ…å†µï¼š**

* æ·»åŠ æ–°åŠŸèƒ½ï¼ˆå…¼å®¹æ—§ä»£ç ï¼‰
* ä¿®å¤ bug
* æ€§èƒ½ä¼˜åŒ–
* å†…éƒ¨é‡æ„

### â“ 0.x.x ç‰ˆæœ¬å¦‚ä½•ç®¡ç†ï¼Ÿ

åœ¨åˆå§‹å¼€å‘é˜¶æ®µï¼ˆ0.x.xï¼‰ï¼š

* **0.1.0** - åˆå§‹åŠŸèƒ½ç‰ˆæœ¬
* **0.1.x** - Bug ä¿®å¤
* **0.2.0** - æ–°å¢åŠŸèƒ½
* å¯ä»¥éšæ„è¿›è¡Œç ´åæ€§å˜æ›´
* è¾¾åˆ°ç¨³å®šåå‡çº§åˆ° **1.0.0**

### â“ å¦‚ä½•å¤„ç†å®‰å…¨æ¼æ´ï¼Ÿ

```bash
# å¦‚æœæ˜¯ patch çº§åˆ«çš„ä¿®å¤
npm version patch
git commit -m "ğŸ”’ security: ä¿®å¤ XSS æ¼æ´ (CVE-2023-12345)"

# å¦‚æœéœ€è¦ç ´åæ€§å˜æ›´
npm version major
git commit -m "ğŸ’¥ breaking(security): ä¿®å¤å…³é”®å®‰å…¨é—®é¢˜"
```

## ç›¸å…³å·¥å…·æ¨è

### ğŸ› ï¸ ç‰ˆæœ¬ç®¡ç†å·¥å…·

* **semantic-release** - è‡ªåŠ¨åŒ–ç‰ˆæœ¬å‘å¸ƒ
* **standard-version** - è‡ªåŠ¨åŒ– CHANGELOG å’Œç‰ˆæœ¬å·
* **commitizen** - è§„èŒƒåŒ–æäº¤ä¿¡æ¯
* **conventional-changelog** - è‡ªåŠ¨ç”Ÿæˆ CHANGELOG

### ğŸ“¦ å®‰è£…å’Œä½¿ç”¨

```bash
# å®‰è£… standard-version
npm install --save-dev standard-version

# é…ç½® package.json
{
  "scripts": {
    "release": "standard-version",
    "release:patch": "standard-version --release-as patch",
    "release:minor": "standard-version --release-as minor",
    "release:major": "standard-version --release-as major"
  }
}

# ä½¿ç”¨
npm run release        # è‡ªåŠ¨åˆ¤æ–­ç‰ˆæœ¬å·
npm run release:patch  # å¼ºåˆ¶å‡çº§ patch
npm run release:minor  # å¼ºåˆ¶å‡çº§ minor
npm run release:major  # å¼ºåˆ¶å‡çº§ major
```

## æ€»ç»“

### ğŸ“Œ è®°ä½è¿™äº›æ ¸å¿ƒåŸåˆ™

1. **PATCH** (0.0.x) - ä¿® bugï¼Œä¸æ”¹æ¥å£
2. **MINOR** (0.x.0) - åŠ åŠŸèƒ½ï¼Œå…¼å®¹æ—§ç‰ˆ
3. **MAJOR** (x.0.0) - å¤§æ”¹åŠ¨ï¼Œä¸å…¼å®¹

### ğŸ¯ å¿«é€Ÿå†³ç­–æ ‘

```
æ˜¯å¦ä¿®æ”¹äº†å…¬å…± APIï¼Ÿ
â”œâ”€ å¦ â†’ æ˜¯ bug ä¿®å¤ï¼Ÿ
â”‚      â”œâ”€ æ˜¯ â†’ PATCH (0.0.1)
â”‚      â””â”€ å¦ â†’ å…¶ä»–æ”¹åŠ¨ï¼Ÿ
â”‚             â””â”€ æ˜¯ â†’ PATCH (0.0.1)
â””â”€ æ˜¯ â†’ æ˜¯å¦å‘ä¸‹å…¼å®¹ï¼Ÿ
       â”œâ”€ æ˜¯ â†’ æ–°å¢åŠŸèƒ½ï¼Ÿ
       â”‚      â””â”€ æ˜¯ â†’ MINOR (0.1.0)
       â””â”€ å¦ â†’ ç ´åæ€§å˜æ›´ï¼Ÿ
              â””â”€ æ˜¯ â†’ MAJOR (1.0.0)
```
